<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Change Ubuntu to Arch Linux | Jiahui Chen</title> <meta name="author" content="Jiahui Chen"/> <meta name="description" content="I changed my Ubuntu Desktop to Arch Linux"/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light"/> <link rel="shortcut icon" href="/assets/img/uark.png"/> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://jiahuic.github.io/configuration/2023/11/27/Ubuntu2arch.html"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Jiahui </span>Chen</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching and Mentoring</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Submenus</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/cv/">CV</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/talks/">Talks</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Change Ubuntu to Arch Linux</h1> <p class="post-meta">November 27, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/tag/linux"> <i class="fas fa-hashtag fa-sm"></i> linux</a>   <a href="/blog/tag/install"> <i class="fas fa-hashtag fa-sm"></i> install</a>     ·   <a href="/blog/category/configuration"> <i class="fas fa-tag fa-sm"></i> configuration</a>   </p> </header> <article class="post-content"> <p>I have a personal desktop using Ubuntu 22.04. And I did one more step that I followed the <em>Ubuntu 22.04 Customization</em> by LinuxScoop to make it more beautiful. However, I keep having some problems with the Ubuntu Desktop, such as CapsLock changed back, and some function keys disfunctional. And the most unacceptable thing is the fan is always running at high speed, which makes me feel like I am in a server room. Also, the tilling window manager has its benefits. I decided to change my Ubuntu Desktop to Arch Linux. Without losing the entertainment function, I will install the Arch Linux with the dual boot with the linux mint.</p> <p>Here is some steps I did before I start to install Arch Linux.</p> <ul> <li>backup the data <ul> <li><a href="#backup-the-ssh-key">SSH key</a></li> <li>Notes folder</li> <li>Documents folder</li> <li>Garage folder</li> </ul> </li> <li>partition the disk. I will install the Arch Linux with the dual boot with the linux mint. <ol> <li>Clean the existing partitions <ul> <li>Run <code class="language-plaintext highlighter-rouge">lsblk</code> to check the partitions</li> <li>Start <code class="language-plaintext highlighter-rouge">fdisk</code>, for example <code class="language-plaintext highlighter-rouge">fdisk /dev/sda</code> </li> <li>Input <code class="language-plaintext highlighter-rouge">p</code> to print the partitions</li> <li>Input <code class="language-plaintext highlighter-rouge">d</code> to delete the partitions</li> <li>Input <code class="language-plaintext highlighter-rouge">w</code> to write the changes</li> </ul> </li> <li>Create the new partitions <ul> <li>Run <code class="language-plaintext highlighter-rouge">fdisk /dev/sda</code> </li> <li>Input <code class="language-plaintext highlighter-rouge">n</code> to create a new partition</li> <li>For end sector, input <code class="language-plaintext highlighter-rouge">+512M</code> for the boot partition</li> <li>Input <code class="language-plaintext highlighter-rouge">w</code> to write the changes</li> </ul> </li> <li>Formatting the Partitions <ul> <li>Run <code class="language-plaintext highlighter-rouge">mkfs.fat -F32 /dev/sda1</code> to format the boot partition</li> <li>Run <code class="language-plaintext highlighter-rouge">mkfs.ext4 /dev/sda2</code> to format the root partition</li> </ul> </li> <li>Mounting the Partitions <ul> <li>Run <code class="language-plaintext highlighter-rouge">mount /dev/sda2 /mnt</code> to mount the root partition</li> <li>Run <code class="language-plaintext highlighter-rouge">mkdir /mnt/boot</code> to create the boot directory</li> <li>Run <code class="language-plaintext highlighter-rouge">mount /dev/sda1 /mnt/boot</code> to mount the boot partition</li> </ul> </li> <li>During the installation, manually change the disk configuration <ul> <li>Select <code class="language-plaintext highlighter-rouge">Manual partitioning</code> </li> <li>Assign Mont Point <code class="language-plaintext highlighter-rouge">/</code> to the root partition, <code class="language-plaintext highlighter-rouge">/boot</code> to the boot partition, and <code class="language-plaintext highlighter-rouge">/home</code> to the home partition</li> </ul> </li> </ol> </li> <li>install the linux mint <ol> <li>I also think about a dual system with the same <code class="language-plaintext highlighter-rouge">/home</code>, but it might casue more problems. Clearly, you can expect the configuration files are quit different in both systems.</li> <li>Convert MBR to GPT <ul> <li>Run <code class="language-plaintext highlighter-rouge">gdisk /dev/sda</code> </li> <li>Input <code class="language-plaintext highlighter-rouge">r</code> to enter the recovery and transformation menu</li> <li>Input <code class="language-plaintext highlighter-rouge">g</code> to convert MBR to GPT</li> <li>Input <code class="language-plaintext highlighter-rouge">p</code> to print the partitions</li> <li>Input <code class="language-plaintext highlighter-rouge">w</code> to write the changes</li> </ul> </li> <li>Install the linux mint without write the boot loader <ul> <li>Run <code class="language-plaintext highlighter-rouge">ubiquity -b</code> to install the linux mint without write the boot loader</li> </ul> </li> <li>Login to the archlinux <ul> <li>Uncomment the <code class="language-plaintext highlighter-rouge">GRUB_DISABLE_OS_PROBER=false</code> in the <code class="language-plaintext highlighter-rouge">/etc/default/grub</code> </li> <li>Run <code class="language-plaintext highlighter-rouge">sudo grub-mkconfig -o /boot/grub/grub.cfg</code> to update the grub</li> </ul> </li> </ol> </li> </ul> <h4 id="backup-the-ssh-key">Backup the ssh key</h4> <h5 id="before-reinstalling-your-system">Before Reinstalling Your System</h5> <ol> <li> <strong>Locate Your SSH Keys</strong>: <ul> <li>By default, your private and public SSH keys are stored in <code class="language-plaintext highlighter-rouge">~/.ssh/</code>.</li> <li>The private key is typically named <code class="language-plaintext highlighter-rouge">id_rsa</code>, and the public key is typically named <code class="language-plaintext highlighter-rouge">id_rsa.pub</code> (for RSA keys; other types like ECDSA or Ed25519 will have different file names).</li> </ul> </li> <li> <strong>Backup Your SSH Keys</strong>: <ul> <li>Copy these files to a secure backup location. You can use an external drive, a USB stick, or a secure cloud storage service.</li> <li>It’s critical to keep your private key (<code class="language-plaintext highlighter-rouge">id_rsa</code>) secure and confidential.</li> </ul> </li> </ol> <h5 id="after-reinstalling-your-system">After Reinstalling Your System</h5> <ol> <li> <strong>Restore Your SSH Keys</strong>: <ul> <li>Copy the backed-up SSH key files back into the <code class="language-plaintext highlighter-rouge">~/.ssh/</code> directory in your home folder on the new system.</li> <li>If the <code class="language-plaintext highlighter-rouge">~/.ssh/</code> directory doesn’t exist, you can create it with <code class="language-plaintext highlighter-rouge">mkdir ~/.ssh</code>.</li> </ul> </li> <li> <strong>Set Correct Permissions</strong>: <ul> <li>SSH keys require strict file permissions set for security. Set the correct permissions: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">chmod </span>700 ~/.ssh
<span class="nb">chmod </span>600 ~/.ssh/id_rsa
<span class="nb">chmod </span>644 ~/.ssh/id_rsa.pub
</code></pre></div> </div> </li> <li>Adjust the filenames if your keys have different names.</li> </ul> </li> <li> <strong>Check SSH Agent and Add Keys if Necessary</strong>: <ul> <li>If you use an SSH agent, add your SSH key to it: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>ssh-add ~/.ssh/id_rsa
</code></pre></div> </div> </li> </ul> </li> <li> <strong>Test Your SSH Key</strong>: <ul> <li>Try connecting to a server where your SSH key was previously authorized to ensure it works correctly.</li> </ul> </li> </ol> <h5 id="notes">Notes</h5> <ul> <li> <strong>Security</strong>: Always handle your SSH keys securely. The private key should never be shared or exposed to anyone.</li> <li> <strong>Key Types</strong>: If you’re using a different type of key (like ECDSA or Ed25519), the file names will be different. Make sure to backup the correct key files.</li> <li> <strong>New Installation</strong>: Ensure that the SSH client is installed on your new system. It typically is installed by default in Ubuntu.</li> <li> <strong>e2fsprogs</strong>: the archlinux always has the lastest version of the e2fsprogs, which is used to format the disk. However, the linux mint 20.04 has the old version of the e2fsprogs.</li> </ul> <h4 id="reference">Reference</h4> <ul> <li>This is a very useful blog about how to update the grub <a href="https://averagelinuxuser.com/dual-boot-arch-linux-with-linux/" target="_blank" rel="noopener noreferrer">link</a> </li> </ul> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Jiahui Chen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="noopener noreferrer">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>