<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Setting up Workstation for Research | Jiahui Chen</title> <meta name="author" content="Jiahui Chen"/> <meta name="description" content="an easy installation and set up for people who want to use arch linux for research"/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light"/> <link rel="shortcut icon" href="/assets/img/uark.png"/> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://jiahuic.github.io/configuration/2023/11/27/server.html"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Jiahui </span>Chen</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching and Mentoring</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Submenus</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/cv/">CV</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/talks/">Talks</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Setting up Workstation for Research</h1> <p class="post-meta">November 27, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/tag/linux"> <i class="fas fa-hashtag fa-sm"></i> linux</a>   <a href="/blog/tag/install"> <i class="fas fa-hashtag fa-sm"></i> install</a>     ·   <a href="/blog/category/configuration"> <i class="fas fa-tag fa-sm"></i> configuration</a>   </p> </header> <article class="post-content"> <h3 id="introduction">Introduction</h3> <p>The workstation is a Dell Precision-5820 with 64 GB of RAM and 2 TB of SSD. The OS is Ubuntu Linux. The workstation is used for research and development.</p> <h3 id="to-set-up-the-ssh-server">To set up the SSH server</h3> <ol> <li> <strong>Install OpenSSH Server</strong>: If not already installed, you need to install the OpenSSH Server software. You can do this by opening a terminal and running: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>openssh-server
</code></pre></div> </div> </li> <li> <strong>Check SSH Service Status</strong>: Ensure that the SSH service is running with the command: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status ssh
</code></pre></div> </div> </li> <li> <strong>Configure SSH (Optional)</strong>: You can configure SSH settings by editing the SSH configuration file: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/ssh/sshd_config
</code></pre></div> </div> <p>Here, you can change settings like the port number, permit root login, and more. After editing, restart the SSH service to apply changes:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ssh
</code></pre></div> </div> </li> <li> <strong>Firewall Configuration</strong>: Make sure the firewall allows SSH connections. You can allow SSH through the firewall with: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ufw allow ssh
</code></pre></div> </div> <p>and enable the firewall using:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ufw <span class="nb">enable</span>
</code></pre></div> </div> </li> <li> <strong>Find Your Workstation’s IP Address</strong>: You need to know your workstation’s IP address to connect from another computer. You can find it by running: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>ip a
</code></pre></div> </div> </li> <li> <strong>Connect from Campus Network</strong>: From another computer on the campus network, you can connect to your workstation using: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>ssh username@your_workstation_ip
</code></pre></div> </div> <p>Replace <code class="language-plaintext highlighter-rouge">username</code> with your username on the Ubuntu workstation and <code class="language-plaintext highlighter-rouge">your_workstation_ip</code> with the workstation’s IP address.</p> </li> <li> <strong>Additional Configurations (If Needed)</strong>: <ul> <li> <strong>Static IP</strong>: Consider setting a static IP for the workstation if you don’t want its IP to change.</li> <li> <strong>Port Forwarding</strong>: If you need to access the server from outside the campus network, you might need to set up port forwarding on your network router.</li> <li> <strong>SSH Key Authentication</strong>: For added security, consider setting up SSH key-based authentication.</li> </ul> </li> </ol> <h3 id="configure-the-ssh-client">Configure the ssh client</h3> <p>As for editing the SSH configuration file, here are some common changes you might consider:</p> <ol> <li> <strong>Change the Default SSH Port (Optional for Security)</strong>: By default, SSH uses port 22. Changing this to a non-standard port can add a layer of security through obscurity. <ul> <li>To change the port, find the line in <code class="language-plaintext highlighter-rouge">/etc/ssh/sshd_config</code> that says <code class="language-plaintext highlighter-rouge">#Port 22</code> and change it to something like <code class="language-plaintext highlighter-rouge">Port 22</code> (or another port of your choice).</li> </ul> </li> <li> <p><strong>Disable Root Login (Recommended for Security)</strong>: To prevent the root user from logging in via SSH, find the line that says <code class="language-plaintext highlighter-rouge">#PermitRootLogin yes</code> and change it to <code class="language-plaintext highlighter-rouge">PermitRootLogin no</code>.</p> </li> <li> <strong>Allow or Deny Specific Users (Optional)</strong>: You can specify which users are allowed or denied SSH access. <ul> <li>To allow specific users, add a line like <code class="language-plaintext highlighter-rouge">AllowUsers jiahuic</code> (replace <code class="language-plaintext highlighter-rouge">jiahuic</code> with the desired username).</li> <li>To deny specific users, add a line like <code class="language-plaintext highlighter-rouge">DenyUsers someuser</code>.</li> </ul> </li> <li> <strong>Use SSH Key Authentication (Recommended for Security)</strong>: For added security, consider setting up SSH key-based authentication instead of using password authentication. This involves generating an SSH key pair and adding the public key to the <code class="language-plaintext highlighter-rouge">~/.ssh/authorized_keys</code> file on your server.</li> </ol> <p>After making any changes, save the file and restart the SSH service to apply them:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ssh
</code></pre></div></div> <p>With these settings, you can connect to your server from another computer on your campus network using:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh username@your_workstation_ip
</code></pre></div></div> <ol> <li> <strong>Link local ssh key to remote server</strong>: To link your local ssh key to the remote server, you can use the following command: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>ssh-copy-id <span class="nt">-i</span> ~/.ssh/id_rsa.pub username@your_workstation_ip
</code></pre></div> </div> <p>This command will copy your local ssh key to the remote server. You can then use the following command to login to the remote server:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>ssh username@your_workstation_ip
</code></pre></div> </div> </li> </ol> <h3 id="server-sleep-and-suspend-modes">Server Sleep and Suspend Modes</h3> <p>To ensure your server remains active and doesn’t enter a sleep mode (which can lead to the ‘client_loop: send disconnect: Broken pipe’ error during SSH sessions), you can configure your Ubuntu server to disable sleep and suspend modes. Here’s how to do it:</p> <ol> <li> <strong>Disable Sleep and Suspend Using System Settings</strong>: <ul> <li>Open the terminal.</li> <li>Run the following command to prevent the server from sleeping: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target
</code></pre></div> </div> </li> <li>This command stops the system from entering sleep, suspend, hibernate, or hybrid-sleep states.</li> </ul> </li> <li> <strong>Edit Power Management Settings</strong>: <ul> <li>If you have a graphical interface, you can also change these settings in the power management section of your system settings. Look for options like “When the lid is closed” or “Sleep” and set them to ‘Do Nothing’ or ‘Never’.</li> </ul> </li> <li> <strong>Edit/Check <code class="language-plaintext highlighter-rouge">/etc/ssh/sshd_config</code></strong>: <ul> <li>Sometimes, SSH connections may drop due to server-side settings. You should ensure that <code class="language-plaintext highlighter-rouge">ClientAliveInterval</code> and <code class="language-plaintext highlighter-rouge">ClientAliveCountMax</code> are configured in your SSH configuration file (<code class="language-plaintext highlighter-rouge">/etc/ssh/sshd_config</code>) to keep the connection alive.</li> <li>You can add or edit these lines: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>ClientAliveInterval 120
ClientAliveCountMax 720
</code></pre></div> </div> </li> <li>After editing, restart the SSH service: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart ssh
</code></pre></div> </div> </li> <li>These settings will send a signal every 120 seconds and keep the connection alive unless the client fails to respond 720 times.</li> </ul> </li> <li> <strong>Use <code class="language-plaintext highlighter-rouge">tmux</code> or <code class="language-plaintext highlighter-rouge">screen</code></strong>: <ul> <li>For long-running processes like Jupyter Notebooks, consider using a terminal multiplexer like <code class="language-plaintext highlighter-rouge">tmux</code> or <code class="language-plaintext highlighter-rouge">screen</code>. These tools allow you to detach from a session and leave it running in the background. You can then reattach to this session later, even after getting disconnected.</li> </ul> </li> <li> <strong>Cron Job to Keep the Server Awake</strong>: <ul> <li>As a last resort, you can set up a cron job to execute a harmless command at regular intervals to keep the server awake.</li> <li>Open the cron job file with <code class="language-plaintext highlighter-rouge">crontab -e</code> and add a line like: ```bash <ul> <li> <ul> <li> <ul> <li> <ul> <li> <ul> <li>/bin/true ```</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li>This command does nothing but runs every minute to keep the system active.</li> </ul> </li> </ol> <h3 id="setup-nvidia-driver-cuda-and-cudnn">Setup NVIDIA Driver, CUDA, and cuDNN</h3> <p>This part should be very careful. If you install the wrong version of NVIDIA driver or update it unproperly, you may not be able to find the driver.</p> <ol> <li>Disable the secure boot in the BIOS.</li> <li>Remove any NIVIDA driver installed by Ubuntu. <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get purge nvidia<span class="k">*</span>
</code></pre></div> </div> </li> <li>Add the Proprietary GPU Drivers PPA. <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>add-apt-repository ppa:graphics-drivers/ppa
<span class="nb">sudo </span>apt-get update
</code></pre></div> </div> </li> <li>Blacklist the Nouveau driver. <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash <span class="nt">-c</span> <span class="s2">"echo blacklist nouveau &gt; /etc/modprobe.d/blacklist-nvidia-nouveau.conf"</span>
<span class="nb">sudo </span>bash <span class="nt">-c</span> <span class="s2">"echo options nouveau modeset=0 &gt;&gt; /etc/modprobe.d/blacklist-nvidia-nouveau.conf"</span>
</code></pre></div> </div> </li> <li>Auto-Install Recommended Drivers <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ubuntu-drivers autoinstall
</code></pre></div> </div> <p>Or, you can install the specific version of the driver.</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>nvidia-driver-540
</code></pre></div> </div> </li> <li>Install CUDA Toolkit (<a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=20.04&amp;target_type=deb_network" target="_blank" rel="noopener noreferrer">CUDA Toolkit download page</a> </li> <li>Set Environment Variables <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'export PATH=/usr/local/cuda-11.2/bin${PATH:+:${PATH}}'</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">echo</span> <span class="s1">'export LD_LIBRARY_PATH=/usr/local/cuda-11.2/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}'</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">source</span> ~/.bashrc
</code></pre></div> </div> </li> <li>Install cuDNN (<a href="https://developer.nvidia.com/rdp/cudnn-download" target="_blank" rel="noopener noreferrer">cuDNN download page</a>)</li> </ol> <h3 id="other-useful-tools">Other Useful Tools</h3> <ul> <li> <strong>Change bash to zsh</strong>: <code class="language-plaintext highlighter-rouge">sudo apt install zsh</code> </li> <li> <strong>Install nodejs</strong>: <ul> <li>Install <code class="language-plaintext highlighter-rouge">nvm</code>: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>curl <span class="nt">-o-</span> https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bash
</code></pre></div> </div> </li> <li>Install <code class="language-plaintext highlighter-rouge">nodejs</code>: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>nvm <span class="nb">install </span>node
</code></pre></div> </div> </li> </ul> </li> </ul> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Jiahui Chen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="noopener noreferrer">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>